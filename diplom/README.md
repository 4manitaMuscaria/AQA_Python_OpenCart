## О проекте
Данный проект представляет собой набор автоматизированных тестов для платформы OpenCart. 
Тесты разделены на две категории:

- **UI-тесты** : 3 теста, проверяющие функциональность пользовательского интерфейса.
- **API-тесты** : 3 теста, включая CRUD-операции, проверяющие работу API.

Тесты написаны на Python с использованием современных инструментов и библиотек для обеспечения надежности и удобства поддержки.

## Структура проекта
Проект организован следующим образом:
```markdown
diplom/  
├── config/  
│   └── credentials.py          # Файл с конфигурацией (учетные данные, URL и т.д.)  
├── elements/                   # Веб-элементы для UI-тестов  
├── pages/                      # Классы страниц для Page Object Model  
├── locators/                   # Локаторы элементов UI  
├── models/                     # Модели Pydantic для валидации данных API  
├── src/                        # Вспомогательные модули  
│   └── test_data.py            # Генерация тестовых данных  
├── tests/  
│   ├── ui_tests/               # UI-тесты  
│   │   ├── conftest_ui.py      # Конфигурация фикстур для WebDriver  
│   │   ├── fixtures_ui.py      # Конфигурация фикстур setup и teardown для UI-тестов  
│   │   └── test_*.py           # Файлы с UI-тестами  
│   └── api_tests/              # API-тесты  
│       ├── conftest_api.py     # Конфигурация фикстур для API-тестов  
│       ├── fixtures_api.py     # Конфигурация фикстур setup и teardown для API-тестов  
│       └── test_*.py           # Файлы с API-тестами  
├── utils/  
│   └── logger.py               # Настройка логирования  
├── docker-compose.yml          # Docker Compose для развертывания OpenCart  
├── Dockerfile                  # Dockerfile для сборки образа с тестами  
├── pytest.ini                  # Конфигурация pytest  
├── poetry.lock                 # Замороженные зависимости  
└── pyproject.toml              # Конфигурация Poetry  
```
## Используемые библиотеки
Проект использует следующие библиотеки:

- pytest : Фреймворк для написания и запуска тестов.
- selenium : Для автоматизации браузера в UI-тестах.
- requests : Для выполнения HTTP-запросов в API-тестах.
- pydantic : Для валидации данных в API-тестах.
- faker : Для генерации тестовых данных.
- pyautogui : Для эмуляции действий пользователя (например, загрузка файлов).
- sqlalchemy : Для работы с базой данных (если требуется).
- pymysql : Для взаимодействия с MySQL.
- pylint : Для статического анализа кода.

## Инструкция по сборке и запуску
1. Развертывание OpenCart
Используйте docker-compose для развертывания OpenCart:
```bash
docker-compose up -d
```
Примечание 1: Убедитесь, что порт 8080 свободен или измените его в docker-compose.yml.
Примечание 2: Убедитесь, что IP, указанный в docker-compose.yml совпадает с IP, указанным в config/credentials.py

2. Запуск Selenoid
Для запуска Selenoid выполните следующие команды:
```bash
cm selenoid start --vnc
```
Так же, при необходимости запустите Selenoid-ui:
```bash
cm selenoid-ui start
```
Примечание: Убедитесь, что Docker и утилита **cm** установленs и работают на вашей системе, и команда выполняется из директории расположения **cm**. 

3. Установка зависимостей
Если вы хотите запустить тесты локально, установите зависимости с помощью Poetry:
```bash
poetry install
```

4. Запуск тестов  
#### Локальный запуск  
Для запуска тестов локально выполните:
```bash
poetry run pytest tests/ --execution=local
```
Чтобы запустить только UI-тесты:
```bash
poetry run pytest tests/ui_tests/ --execution=local
```
Чтобы запускать только API-тесты:
```bash
poetry run pytest tests/api_tests/ 
```
#### Запуск из Docker
Соберите образ с тестами:
```bash
docker build -t opencart-tests .
```
Запустите контейнер с тестами:
```bash
docker run --network selenoid opencart-tests tests/ --executor=selenoid --headless
```
Примечание: Использование --network selenoid необходимо для доступа к Selenoid. 

5. Логирование
Все логи тестов сохраняются в директорию logs/. Вы можете настроить формат и уровень логирования в utils/logger.py.

## Дополнительная информация
- Генерация тестовых данных : Все тестовые данные генерируются динамически с помощью модуля src/test_data.py.
- Конфигурация : Учетные данные и URL для тестов находятся в config/credentials.py.
- Локальные настройки : Если вы хотите изменить конфигурацию pytest, отредактируйте файл pytest.ini.